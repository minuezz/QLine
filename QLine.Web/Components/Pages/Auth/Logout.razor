@page "/logout"
@using Microsoft.AspNetCore.Components.Authorization
@layout QLine.Web.Components.Layout.EmptyLayout
@inject IJSRuntime JS

<div class="d-flex justify-content-center align-items-center vh-100">
    <div class="text-center">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
        <p class="mt-3">Signing out...</p>
    </div>
</div>

<form id="logout-form" method="post" action="/auth/logout" style="display:none;">
    <button type="submit">Sign out</button>
</form>

@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JS.InvokeVoidAsync("eval", "document.getElementById('logout-form').submit();");
        }
    }
}